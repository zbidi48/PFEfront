<div class="container-fluid px-4">
  <h1 class="mt-4">les demandes de visa</h1>


  <div class="card mb-4">
    <div class="table-responsive">
      <table  class="table table-bordered" *ngIf="visas.length>0">
        <thead>
        <tr>
          <th>nom</th>
          <th>prenom</th>
          <th>post</th>
          <th>jobid</th>
          <th>date depot</th>
          <th>status</th>
          <th>type visa</th>

          <th>Action</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let visa of visas">
          <td>{{visa.nom}}</td>
          <td>{{visa.prenom}}</td>
          <td>{{visa.post}}</td>
          <td>{{visa.jobid}}</td>
          <td>{{visa.datedepot | date}}</td>
          <td>{{visa.status}}</td>
          <td>{{visa.typevisa}}</td>

          <td>
            <a class="btn btn-sm btn-danger" (click)="deletevisa(visa.id)" >
              <i class="mdi mdi-delete"></i>
            </a>

            <ng-container *ngIf="visa.status =='ENCOUR'" >
              <a class="btn btn-sm btn-success" (click)="changeStatus(visa.id,'accepte')">
                <i class="mdi mdi-marker-check"></i>
              </a>
              <a class="btn btn-sm btn-warning" (click)="changeStatus(visa.id,'refuse')">
                <i class="mdi mdi-folder-remove"></i>
              </a>
            </ng-container>
            <ng-container *ngIf="visa.status =='ACCEPTE'" >
              <a class="btn btn-sm btn-warning" (click)="changeStatus(visa.id,'refuse')">
                <i class="mdi mdi-folder-remove"></i>
              </a>
            </ng-container>
            <ng-container *ngIf="visa.status =='REFUSE'" >
              <a class="btn btn-sm btn-success" (click)="changeStatus(visa.id,'accepte')">
                <i class="mdi mdi-marker-check"></i>
              </a>

            </ng-container>

            <!--<a class="btn btn-sm btn-primary" [routerLink]="['/rh/accordvisa/'+visa.id]" >statusvisa</a>-->
          </td>

        </tr>
        </tbody>

      </table>
      <span *ngIf="visas.length==0">table vide</span>
    </div>
  </div>
</div>

