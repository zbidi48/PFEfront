<div class="container-fluid px-4">
  <h1 class="mt-4">Liste de visa</h1>

  <form  [formGroup]="searchvisaform" (ngSubmit)="searchvisas()" >
    <div class="row">
      <div class="col-sm-6">
        <div class="form-group ">
          <label>visas:</label>
          <input type="text" id=" jobid"
                 class="form-control"
                 name="jobid"
                 placeholder="jobid"
                 formControlName="jobid">
        </div>
      </div>

    </div>
    <div class="form-group mb-5">
      <button class="btn btn-info" type="submit">chercher jobid employee</button>
    </div>
  </form>

  <div class="table-responsive pt-3">
    <table class="table table-dark" *ngIf="visas.length>0">
      <thead>
      <tr>
        <th>date depot</th>
        <th>status</th>
        <th>type visa</th>
        <th>nom</th>
        <th>prenom</th>
        <th>post</th>
        <th>jobid</th>
        <th>Action</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let visa of visas">
        <td>{{visa.datedepot | date}}</td>
        <td>{{visa.status}}</td>
        <td>{{visa.typevisa}}</td>
        <td>{{visa.nom}}</td>
        <td>{{visa.prenom}}</td>
        <td>{{visa.post}}</td>
        <td>{{visa.jobid}}</td>
        <td>
          <a class="btn btn-sm btn-danger" (click)="deletevisa(visa.id)" >
            <i class="mdi mdi-delete"></i>
          </a>

          <ng-container *ngIf="visa.status =='ENCOUR'" >
            <a class="btn btn-sm btn-success" (click)="changeStatus(visa.id,'accepte')">
              <i class="mdi mdi-marker-check"></i>
            </a>
            <a class="btn btn-sm btn-warning" (click)="changeStatus(visa.id,'refuse')">
              <i class="mdi mdi-folder-remove"></i>
            </a>
          </ng-container>
          <ng-container *ngIf="visa.status =='ACCEPTE'" >
            <a class="btn btn-sm btn-warning" (click)="changeStatus(visa.id,'refuse')">
              <i class="mdi mdi-folder-remove"></i>
            </a>
          </ng-container>
          <ng-container *ngIf="visa.status =='REFUSE'" >
            <a class="btn btn-sm btn-success" (click)="changeStatus(visa.id,'accepte')">
              <i class="mdi mdi-marker-check"></i>
            </a>

          </ng-container>

          <!--<a class="btn btn-sm btn-primary" [routerLink]="['/rh/accordvisa/'+visa.id]" >statusvisa</a>-->
        </td>

      </tr>
      </tbody>

    </table>
    <span *ngIf="visas.length==0">table vide</span>
  </div>
</div>

